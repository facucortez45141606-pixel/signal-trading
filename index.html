<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Indicador de Se√±ales IA - Facu</title>

<!-- Estilos -->
<style>
  body {
    background-color: #0e0e12;
    color: #e2e0f0;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 40px;
  }
  h1 {
    color: #38bdf8;
  }
  input[type="file"] {
    margin: 15px 0;
  }
  button {
    background: #38bdf8;
    color: black;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
  }
  #result {
    font-size: 1.3em;
    margin-top: 25px;
  }
  small {
    color: #9ca3af;
  }
</style>

<!-- Librer√≠a de IA -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ml5/0.12.2/ml5.min.js"></script>
</head>

<body>
  <h1>Indicador de Se√±ales ü§ñüíπ</h1>
  <p>Sub√≠ una captura del gr√°fico (velas japonesas) y el sistema con IA analizar√° patrones visuales para decidir si conviene <b>comprar</b> o <b>vender</b>.</p>

  <input type="file" id="upload" accept="image/*" />
  <button onclick="analyze()">Analizar con IA</button>
  <div id="result">üìä Esperando an√°lisis...</div>

<script>
function analyze() {
  const file = document.getElementById('upload').files[0];
  const result = document.getElementById('result');

  if (!file) {
    result.innerHTML = "‚ö†Ô∏è Primero seleccion√° una imagen.";
    return;
  }

  const img = new Image();
  const reader = new FileReader();

  reader.onload = function(e) {
    img.src = e.target.result;
    img.onload = function() {
      // Crear canvas
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0, img.width, img.height);

      // Convertir imagen a tensor (IA)
      const model = ml5.imageClassifier('MobileNet', () => {
        model.predict(canvas, (err, results) => {
          if (err) {
            result.innerHTML = "‚ùå Error en el an√°lisis.";
            return;
          }

          const label = results[0].label.toLowerCase();
          let decision = "";

          // L√≥gica simple basada en el contenido visual
          if (label.includes("green") || label.includes("up") || label.includes("chart") || label.includes("bull")) {
            decision = "üü¢ Se√±al de COMPRA - Tendencia alcista detectada";
          } else if (label.includes("red") || label.includes("down") || label.includes("bear")) {
            decision = "üî¥ Se√±al de VENTA - Tendencia bajista detectada";
          } else {
            decision = "‚ö™ Se√±al NEUTRA o indecisa";
          }

          result.innerHTML = `${decision}<br><small>(An√°lisis IA basado en reconocimiento visual ml5.js)</small>`;
        });
      });
    };
  };
  reader.readAsDataURL(file);
}
</script>
</body>
</html>
