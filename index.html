<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Indicador de Se√±ales - Facu</title>
<style>
  body {
    background-color: #0e0e12;
    color: #e2e0f0;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 40px;
  }
  h1 {
    color: #38bdf8;
  }
  input[type="file"] {
    margin: 15px 0;
  }
  button {
    background: #38bdf8;
    color: black;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
  }
  #result {
    font-size: 1.4em;
    margin-top: 25px;
  }
</style>
</head>
<body>
  <h1>Indicador de Se√±ales üíπ</h1>
  <p>Sub√≠ una captura del gr√°fico y el sistema analizar√° los colores dominantes para decidir si conviene <b>comprar</b> o <b>vender</b>.</p>

  <input type="file" id="upload" accept="image/*" />
  <button onclick="analyze()">Analizar Se√±al</button>
  <div id="result">üìà Esperando an√°lisis...</div>

<script>
function analyze() {
  const file = document.getElementById('upload').files[0];
  const result = document.getElementById('result');
  if (!file) {
    result.innerHTML = "‚ö†Ô∏è Primero seleccion√° una imagen.";
    return;
  }

  const img = new Image();
  const reader = new FileReader();

  reader.onload = function(e) {
    img.src = e.target.result;
    img.onload = function() {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0, img.width, img.height);

      const data = ctx.getImageData(0, 0, img.width, img.height).data;
      let greenPixels = 0;
      let redPixels = 0;

      for (let i = 0; i < data.length; i += 4) {
        const r = data[i];
        const g = data[i + 1];
        const b = data[i + 2];
        if (g > r && g > b) greenPixels++;
        if (r > g && r > b) redPixels++;
      }

      let decision = "";
      if (greenPixels > redPixels * 1.2) {
        decision = "üü¢ Se√±al de COMPRA - Tendencia alcista detectada";
      } else if (redPixels > greenPixels * 1.2) {
        decision = "üî¥ Se√±al de VENTA - Tendencia bajista detectada";
      } else {
        decision = "‚ö™ Se√±al NEUTRA - Mercado lateral o indefinido";
      }

      result.innerHTML = decision + `<br><small>(An√°lisis basado en dominancia de color)</small>`;
    };
  };

  reader.readAsDataURL(file);
}
</script>
</body>
</html>
